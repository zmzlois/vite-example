"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.buildAssetsMap = buildAssetsMap;
const logging_1 = require("../logging");
const ze_build_assets_1 = require("./ze-build-assets");
function buildAssetsMap(assets, extractBuffer, getAssetType) {
    return Object.keys(assets).reduce((memo, filepath) => {
        const asset = assets[filepath];
        const buffer = extractBuffer(asset);
        if (!buffer && buffer !== '') {
            logging_1.ze_log.upload(`unknown asset type: ${getAssetType(asset)}`);
            return memo;
        }
        const assetMap = (0, ze_build_assets_1.zeBuildAssets)({ filepath, content: buffer });
        memo[assetMap.hash] = assetMap;
        return memo;
    }, {});
}
//# sourceMappingURL=ze-build-assets-map.js.map