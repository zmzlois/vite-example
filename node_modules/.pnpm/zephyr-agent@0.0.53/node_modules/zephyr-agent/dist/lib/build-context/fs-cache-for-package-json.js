"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getPackageJsonCache = getPackageJsonCache;
exports.setPackageJsonCache = setPackageJsonCache;
const zephyr_edge_contract_1 = require("zephyr-edge-contract");
const fs_cache_1 = require("../node-persist/fs-cache");
const cache_prefix = 'package_json';
// todo: persisting package.json cache should be done in a way it stores path to package.json file
// and not the content of the package.json file
// or store last modified time of the file
async function getPackageJsonCache(startingPath) {
    const cache_key = `${cache_prefix}:${startingPath}`;
    const cached = await (0, fs_cache_1.getCache)(cache_key);
    if (!cached)
        return;
    return (0, zephyr_edge_contract_1.safe_json_parse)(cached);
}
async function setPackageJsonCache(startingPath, parsed_package_json) {
    const cache_key = `${cache_prefix}:${startingPath}`;
    await (0, fs_cache_1.saveCache)(cache_key, JSON.stringify(parsed_package_json));
}
//# sourceMappingURL=fs-cache-for-package-json.js.map